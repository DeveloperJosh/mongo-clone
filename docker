FROM node:18

WORKDIR /app

RUN apt-get update && apt-get install -y git curl

RUN curl -fsSL https://bun.sh/install | bash

# Add Bun to the PATH
ENV PATH="/root/.bun/bin:${PATH}"

RUN git clone https://github.com/DeveloperJosh/mongo-clone.git .

RUN bun install

COPY start.sh /app/start.sh
RUN chmod +x /app/start.sh

EXPOSE 3000

# Set default environment variables
ENV USERNAME user
ENV PASSWORD password
ENV JWT_SECRET your_jwt_secret_key # Replace with a strong secret key

CMD ["./start.sh"]
